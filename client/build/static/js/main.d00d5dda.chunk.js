(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{225:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fonts",(function(){return pe})),a.d(n,"liquidCrystalNormal",(function(){return fe})),a.d(n,"liquidCrystalNormalItalic",(function(){return ge})),a.d(n,"liquidCrystalBold",(function(){return me})),a.d(n,"liquidCrystalLight",(function(){return be})),a.d(n,"liquidCrystalLightItalic",(function(){return je})),a.d(n,"liquidCrystalBoldItalic",(function(){return ve})),a.d(n,"liquidCrystalExBold",(function(){return Oe})),a.d(n,"liquidCrystalExBoldItalic",(function(){return ye}));var i={};a.r(i),a.d(i,"ai",(function(){return It})),a.d(i,"bs",(function(){return Pt})),a.d(i,"bi",(function(){return Ft})),a.d(i,"di",(function(){return Et})),a.d(i,"fi",(function(){return Tt})),a.d(i,"fc",(function(){return _t})),a.d(i,"fa",(function(){return Lt})),a.d(i,"gi",(function(){return Rt})),a.d(i,"go",(function(){return Bt})),a.d(i,"gr",(function(){return At})),a.d(i,"hi",(function(){return Ut})),a.d(i,"im",(function(){return Mt})),a.d(i,"io",(function(){return zt})),a.d(i,"io5",(function(){return Gt})),a.d(i,"md",(function(){return Wt})),a.d(i,"ri",(function(){return qt})),a.d(i,"si",(function(){return Ht})),a.d(i,"ti",(function(){return Jt})),a.d(i,"vsc",(function(){return Kt})),a.d(i,"wi",(function(){return Yt})),a.d(i,"cg",(function(){return Vt}));var r=a(1),o=a.n(r),s=a(16),l=a.n(s),c=a(10),d=a.n(c),u=a(15),h=a(20),p=a(21),f=a(9),g=a(23),m=a(22),b=a(13),j=a(8),v=a(30),O="LOG_IN_USER",y="LOG_OUT_USER",x="REPOPULATE_STATE",C=function(){return{type:y}},w=function(e){return{type:x,payload:Object(j.a)({},e)}},k=a(19),S=a.n(k),N="FETCH_PORTFOLIOS_BEGIN",D="FETCH_PORTFOLIOS_SUCCESS",I="FETCH_PORTFOLIOS_FAILURE",P="SAVE_CURRENT_WORK",F="CLEAR_CURRENT_WORK",E="TOGGLE_UNSAVED_WORK",T=function(e){return{type:P,payload:{curr:e}}};function _(e){return function(t){window.localStorage.setItem("portfolioWork",JSON.stringify(e)),t(T(e))}}function L(){return function(e){window.localStorage.removeItem("portfolioWork"),e({type:F})}}function R(e){return function(t){return t({type:N}),S()({method:"GET",url:"https://resumate.xyz/api/portfolio",withCredentials:!0,params:{id:e}}).then((function(e){return e.data})).then((function(e){var a;void 0!==e.portfolios&&t((a=e.portfolios,{type:D,payload:{portfolios:a}}))})).catch((function(e){return t(function(e){return{type:I,payload:{err:e}}}(e))}))}}var B=a(271),A=a(272),U=a(148),M=a(268),z=a(276),G=function(){var e=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.response?(console.log(t.response.data),401===t.response.status&&"unauthorized user"===t.response.data&&(localStorage.removeItem("portfolioUser"),Wa.dispatch(C()),a.push("/"))):console.log(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=a(7),q=a(273),H=a(298),J=a(304),K=a(274),Y=a(302),V=a(275),X=a(29),Z=a(2),$=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).handleLogout=e.handleLogout.bind(Object(f.a)(e)),e.handleUserMenu=e.handleUserMenu.bind(Object(f.a)(e)),e.state={menu_open:!1,user_drawer_open:!1},e.handleLogout=e.handleLogout.bind(Object(f.a)(e)),e.handleReturnDashboard=e.handleReturnDashboard.bind(Object(f.a)(e)),e.handleUserMenu=e.handleUserMenu.bind(Object(f.a)(e)),e.handleReturnHome=e.handleReturnHome.bind(Object(f.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedIn){e.next=7;break}return e.next=3,JSON.parse(window.localStorage.getItem("portfolioUser"));case 3:if(null===(t=e.sent)){e.next=7;break}return e.next=7,this.props.repopulate_state(t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleLogout",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("logging out"),this.props.log_out_user(),this.props.clearCurrentWorkFromLocal(),localStorage.removeItem("portfolioUser"),console.log("successfully cleared localStorage"),e.next=7,S()({method:"GET",url:"https://resumate.xyz/api/logout",withCredentials:!0}).then((function(e){t.props.history.push("/")})).catch((function(e){G(e,t.props.history)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleReturnDashboard",value:function(){this.props.history.push("/dashboard"),this.handleUserMenu()}},{key:"handleReturnHome",value:function(){this.props.history.push("/"),this.handleUserMenu()}},{key:"handleUserMenu",value:function(){this.setState({user_drawer_open:!this.state.user_drawer_open})}},{key:"render",value:function(){var e=this.props,t=e.loggedIn,a=e.name,n=(e.id,e.avatar_url),i=(e.gravatar_id,e.error);if(i)return Object(Z.jsxs)("div",{children:["Error! ",i.message]});var r=this.props.classes;return Object(Z.jsxs)("div",{className:r.root,children:[Object(Z.jsx)(M.a,{}),Object(Z.jsx)(B.a,{position:"fixed",className:this.state.user_drawer_open?"".concat(r.appBar," ").concat(r.appBarShift):r.appBar,children:Object(Z.jsxs)(A.a,{className:r.toolbar,children:[Object(Z.jsx)(q.a,{className:r.homeButton,onClick:this.handleReturnHome,children:Object(Z.jsx)(U.a,{component:"h1",variant:"h6",color:"inherit",fontWeight:"bold",noWrap:!0,className:r.title,children:Object(Z.jsxs)(H.a,{fontWeight:"bold",children:["Resum",Object(Z.jsx)("span",{style:{color:"#FF0000"},children:"ate"})]})})}),Object(Z.jsx)(q.a,{startIcon:Object(Z.jsx)(J.a,{src:n}),onClick:this.handleUserMenu,className:t&&!this.state.user_drawer_open?"":r.hide,children:a})]})}),Object(Z.jsx)(K.a,{variant:"temporary",anchor:"right",onBackdropClick:this.handleUserMenu,classes:{paper:this.state.user_drawer_open?r.drawerPaper:"".concat(r.drawerPaper," ").concat(r.drawerPaperClose)},open:this.state.user_drawer_open,children:Object(Z.jsxs)("div",{className:r.drawerDiv,children:[Object(Z.jsx)(Y.a,{xsDown:!0,children:Object(Z.jsx)(J.a,{src:n,className:r.expandedAvatar})}),Object(Z.jsx)(U.a,{variant:"h4",className:r.title,children:a}),Object(Z.jsx)(V.a,{}),Object(Z.jsxs)(z.a,{className:r.flexDown,children:[Object(Z.jsx)(q.a,{onClick:this.handleLogout,fullWidth:!0,className:r.logoutButton,children:"LOGOUT"}),Object(Z.jsx)(q.a,{onClick:this.handleReturnDashboard,fullWidth:!0,className:r.dashboardButton,children:"DASHBOARD"})]})]})}),Object(Z.jsx)("div",{className:r.appBarSpacer})]})}}]),a}(r.Component),Q={log_out_user:C,repopulate_state:w,clearCurrentWorkFromLocal:L},ee=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn,name:e.login.name,id:e.login.id,avatar_url:e.login.avatar_url,gravatar_id:e.login.gravatar_id,error:e.login.error}}),Q)(Object(W.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(j.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginRight:e.spacing(30),width:"calc(100% - ".concat(e.spacing(30),")"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},homeButton:{marginRight:"auto"},homeButtonHidden:{display:"none"},title:{flexGrow:1},drawerDiv:{display:"block",justifyContent:"center",textAlign:"center",height:"100vh"},drawerPaper:{whiteSpace:"nowrap",width:e.spacing(30),transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(b.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(0)},e.breakpoints.up("sm"),{width:e.spacing(0)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},hide:{display:"none"},expandedAvatar:{marginTop:e.spacing(5),height:e.spacing(20),width:e.spacing(20),marginLeft:"auto",marginRight:"auto"},maxWidthButton:{width:"100%",borderRadius:"0px"},maxHeight:{height:"100%"},flexDown:{display:"flex",flexDirection:"column"},logoutButton:{color:e.palette.error.main,"&:hover":{backgroundColor:e.palette.error.dark}},dashboardButton:{color:e.palette.error.main,"&:hover":{backgroundColor:e.palette.error.dark}}}}))(Object(X.h)($))),te=a(18),ae=a(52),ne=a(229),ie=a(144),re=a.p+"static/media/LiquidCrystal-Normal.f388bf69.woff2",oe=a.p+"static/media/LiquidCrystal-Bold.c84b4328.woff2",se=a.p+"static/media/LiquidCrystal-Light.50eef454.woff2",le=a.p+"static/media/LiquidCrystal-BoldItalic.a30e37ed.woff2",ce=a.p+"static/media/LiquidCrystal-ExBold.9d97e8f2.woff2",de=a.p+"static/media/LiquidCrystal-ExBoldItalic.de63aaa0.woff2",ue=a.p+"static/media/LiquidCrystal-LightItalic.e3e9bde9.woff2",he=a.p+"static/media/LiquidCrystal-NormalItalic.615622e6.woff2",pe=["Arial","Verdana","Helvetica","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT","LiquidCrystal"],fe={fontFamily:"LiquidCrystal",fontStyle:"normal",fontDisplay:"swap",fontWeight:400,src:"\n  local('LiquidCrystal'),\n  local('LiquidCrystal-Normal'),\n  url(".concat(re,") format('woff2')\n  ")},ge={fontFamily:"LiquidCrystal",fontStyle:"normal",fontDisplay:"swap",fontWeight:400,src:"\n  local('LiquidCrystal'),\n  local('LiquidCrystal-NormalItalic'),\n  url(".concat(he,") format('woff2')\n  ")},me={fontFamily:"LiquidCrystal",fontStyle:"normal",fontDisplay:"swap",fontWeight:500,src:"\n  local('LiquidCrystal'),\n  local('LiquidCrystal-Bold'),\n  url(".concat(oe,") format('woff2')\n  ")},be={fontFamily:"LiquidCrystal",fontStyle:"normal",fontDisplay:"swap",fontWeight:300,src:"\n  local('LiquidCrystal'),\n  local('LiquidCrystal-Light'),\n  url(".concat(se,") format('woff2')\n  ")},je={fontFamily:"LiquidCrystal",fontStyle:"normal",fontDisplay:"swap",fontWeight:300,src:"\n  local('LiquidCrystal'),\n  local('LiquidCrystal-LightItalic'),\n  url(".concat(ue,") format('woff2')\n  ")},ve={fontFamily:"LiquidCrystal",fontStyle:"normal",fontDisplay:"swap",fontWeight:500,src:"\n  local('LiquidCrystal'),\n  local('LiquidCrystal-BoldItalic'),\n  url(".concat(le,") format('woff2')\n  ")},Oe={fontFamily:"LiquidCrystal",fontStyle:"normal",fontDisplay:"swap",fontWeight:600,src:"\n  local('LiquidCrystal'),\n  local('LiquidCrystal-ExBold'),\n  url(".concat(ce,") format('woff2')\n  ")},ye={fontFamily:"LiquidCrystal",fontStyle:"normal",fontDisplay:"swap",fontWeight:600,src:"\n  local('LiquidCrystal'),\n  local('LiquidCrystal-ExBoldItalic'),\n  url(".concat(de,") format('woff2')\n  ")},xe=Object(ie.a)({palette:{type:"dark",primary:{light:"#EEEEEE",main:"#444444",dark:"#222222"},secondary:{light:"#ff4081",main:"#f50057",dark:"#c51162",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"rgba(255, 255, 255, 0.87)",secondary:"rgba(0, 0, 0, 0.87)"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto"].join(",")},overrides:{MuiCssBaseline:{"@global":{"@font-face":Object.values(n)}}}}),Ce=["https://media.edutopia.org/styles/responsive_2000px_original/s3/masters/d7_images/cover_media/robinson-169hero-portfolio-shutterstock.jpg","https://assets-global.website-files.com/6009ec8cda7f305645c9d91b/603823eca4b46344229b30f8_portfolio_course.png","https://cdn-japantimes.com/wp-content/uploads/2020/06/np_file_16250.jpeg"],we=["Your Design. Your Website.","Visualize your personality","Stay Ahead"],ke=["No watermarks, no restrictions \u2014 you own your website","Choose your style","Stay Relevant"],Se=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).handleFeatureClick=e.handleFeatureClick.bind(Object(f.a)(e)),e.handleFeatureNext=e.handleFeatureNext.bind(Object(f.a)(e)),e.handleFeaturePrev=e.handleFeaturePrev.bind(Object(f.a)(e)),e.state={featureIndex:0,featureText:ke[0],featureTitle:we[0],featureImage:Ce[0]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedIn){e.next=5;break}return e.next=3,JSON.parse(window.localStorage.getItem("portfolioUser"));case 3:null!==(t=e.sent)&&this.props.repopulate_state(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFeatureClick",value:function(e){this.setState({featureIndex:e,featureTitle:we[e],featureText:ke[e],featureImage:Ce[e]})}},{key:"handleFeatureNext",value:function(){var e=2===this.state.featureIndex?0:this.state.featureIndex+1;this.handleFeatureClick(e)}},{key:"handleFeaturePrev",value:function(){var e=0===this.state.featureIndex?2:this.state.featureIndex-1;this.handleFeatureClick(e)}},{key:"render",value:function(){var e=this.props,t=e.loggedIn,a=e.classes;return Object(Z.jsxs)("div",{className:a.root,children:[Object(Z.jsx)(M.a,{}),Object(Z.jsxs)("div",{className:"".concat(a.welcomeDiv," ").concat(a.centeredDiv),children:[Object(Z.jsx)("img",{src:"https://blog.corp-site.envato.com/cdn-cgi/image/width=1200,quality=95,format=auto/uploads/2020/06/SOC101_Portfolio_Guide.png",className:a.portfolioIcon,alt:"Portfol.io icon"}),Object(Z.jsx)(U.a,{component:"h1",variant:"h2",color:"inherit",noWrap:!0,className:a.title,children:"Welcome to Portfol.io"}),Object(Z.jsx)(U.a,{component:"h1",variant:"h6",color:"inherit",className:a.multiline,children:"Where dreams\nturn\ninto reality"}),t?Object(Z.jsx)(ae.b,{to:"/dashboard",children:"You're logged in already! Lets go to dashboard"}):Object(Z.jsx)(q.a,{href:"https://github.com/login/oauth/authorize?scope=repo&client_id=6d792c38e928408ce009",color:"primary",variant:"contained",children:"Login with Github"})]}),Object(Z.jsxs)("div",{className:"".concat(a.featuresDiv," ").concat(a.centeredDiv),children:[Object(Z.jsx)(q.a,{onClick:this.handleFeaturePrev,className:"".concat(a.floating," ").concat(a.featureButtonLeft),children:Object(Z.jsx)(te.FaChevronLeft,{})}),Object(Z.jsx)("div",{className:a.featureImgDiv,children:Object(Z.jsx)("img",{src:this.state.featureImage,className:a.fullSize,alt:"feature ".concat(this.state.featureSection)})}),Object(Z.jsxs)("div",{className:"".concat(a.featureTextDiv," ").concat(a.centeredDiv),children:[Object(Z.jsx)(U.a,{component:"h2",variant:"h2",color:"inherit",noWrap:!0,className:a.title,children:this.state.featureTitle}),Object(Z.jsx)(U.a,{component:"h6",variant:"h6",color:"inherit",noWrap:!0,className:a.title,children:this.state.featureText})]}),Object(Z.jsx)(q.a,{onClick:this.handleFeatureNext,className:"".concat(a.floating," ").concat(a.featureButtonRight),children:Object(Z.jsx)(te.FaChevronRight,{})})]}),Object(Z.jsx)("div",{className:"".concat(a.faqDiv," ").concat(a.centeredDiv),children:Object(Z.jsx)(z.a,{children:Object(Z.jsx)(ne.a,{})})})]})}}]),a}(r.Component),Ne={repopulate_state:w},De=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn,name:e.login.name,id:e.login.id,avatar_url:e.login.avatar_url,gravatar_id:e.login.gravatar_id,error:e.login.error}}),Ne)(Object(W.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},centeredDiv:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},welcomeDiv:{width:"100%",height:"100vh",backgroundImage:'url("'.concat("https://miro.medium.com/max/1100/1*OlgqUIhvl5-9dZISlZ2-yQ.jpeg",'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover"},welcomeText:{flexGrow:1},multiline:{whiteSpace:"pre-line"},portfolioIcon:{width:"40vh",height:"40vh",borderRadius:"20vh"},featuresDiv:{position:"relative",width:"100%",height:"60vh",flexDirection:"row"},featureTextDiv:{position:"absolute",top:0,right:0,width:"55vw",height:"100%",padding:"10%"},featureImgDiv:{position:"absolute",top:0,left:0,width:"45vw",height:"100%"},fullSize:{width:"100%",height:"100%"},floating:{zIndex:1},featureButtonLeft:{height:"100%",position:"absolute",left:0},featureButtonRight:{height:"100%",position:"absolute",right:0}}}))(Se)),Ie=a(89),Pe=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n,i,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedIn){e.next=5;break}return e.next=3,JSON.parse(window.localStorage.getItem("portfolioUser"));case 3:null===(t=e.sent)?(a=window.location.search,n=new URLSearchParams(a),""!==(i=n.get("code"))?S()({method:"POST",url:"".concat("https://resumate.xyz/api","/login/authenticate"),withCredentials:!0,responseType:"json",data:{code:i}}).then((function(e){return e.data})).then((function(e){var t={loggedIn:!0,name:e.name,id:e.id,avatar_url:e.avatar_url,gravatar_id:e.gravatar_id};window.localStorage.setItem("portfolioUser",JSON.stringify(t)),r.props.fetchPortfolios(e.id),r.props.log_in_user(e)})).catch((function(e){console.log(e.message)})):console.log("gh code missing")):this.props.repopulate_state(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.loggedIn,a=e.classes;return t?Object(Z.jsx)(X.b,{to:"/dashboard"}):Object(Z.jsxs)("div",{className:a.root,children:[Object(Z.jsx)("div",{className:a.appBarSpacer}),Object(Z.jsx)(Ie.BeatLoader,{})]})}}]),a}(r.Component),Fe={log_in_user:function(e){return{type:O,payload:Object(j.a)({},e)}},repopulate_state:w,fetchPortfolios:R},Ee=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn}}),Fe)(Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center"},appBarSpacer:e.mixins.toolbar}}))(Pe)),Te=a(119),_e=a(277),Le=a(299),Re=a(284),Be=a(289),Ae=a(286),Ue=a(287),Me=a(285),ze=a(278),Ge=a(279),We=a(281),qe=a(280),He=a(145),Je=a(283),Ke=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={nameDialogState:!1,portfolioName:"MyPortfolio",duplicateKeyError:!1,duplicateKeyHelperText:"",anchorEl:null,currentPortfolio_Id:"",deleteDialogState:!1,changeNameDialogState:!1,changedName:"",images:{},defaultPreviewSrc:"https://cdn.dribbble.com/users/200733/screenshots/15094543/media/fb4bf141f17b05df82f77926d94ccd6d.png"},e.handleAddPortfolio=e.handleAddPortfolio.bind(Object(f.a)(e)),e.handleOpenPortfolio=e.handleOpenPortfolio.bind(Object(f.a)(e)),e.handleOnChange=e.handleOnChange.bind(Object(f.a)(e)),e.handleNameDialogClose=e.handleNameDialogClose.bind(Object(f.a)(e)),e.handleNameDialogOpen=e.handleNameDialogOpen.bind(Object(f.a)(e)),e.handleDeletePortfolio=e.handleDeletePortfolio.bind(Object(f.a)(e)),e.handleOpenEditMenu=e.handleOpenEditMenu.bind(Object(f.a)(e)),e.handleCloseEditMenu=e.handleCloseEditMenu.bind(Object(f.a)(e)),e.handleDeleteDialogState=e.handleDeleteDialogState.bind(Object(f.a)(e)),e.handleChangeNameDialogState=e.handleChangeNameDialogState.bind(Object(f.a)(e)),e.handleChangePortfolioName=e.handleChangePortfolioName.bind(Object(f.a)(e)),e.handleGetImage=e.handleGetImage.bind(Object(f.a)(e)),e.handleDeleteImage=e.handleDeleteImage.bind(Object(f.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedIn){e.next=7;break}return e.next=3,JSON.parse(window.localStorage.getItem("portfolioUser"));case 3:if(null===(t=e.sent)){e.next=7;break}return e.next=7,this.props.repopulate_state(t);case 7:return e.next=9,this.props.fetchPortfolios(this.props.id);case 9:this.props.portfolios.map((function(e){return a.handleGetImage(e._id)}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCookie",value:function(e){console.log("testing cookie"),S()({method:"GET",url:"https://resumate.xyz/api/portfolio/status",withCredentials:!0}).then((function(e){console.log("authorized"),console.log(e.data)}))}},{key:"handleOnChange",value:function(e){this.setState({duplicateKeyError:!1,duplicateKeyHelperText:""}),this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"handleNameDialogOpen",value:function(){this.setState({nameDialogState:!0})}},{key:"handleNameDialogClose",value:function(){this.setState({nameDialogState:!1})}},{key:"handleDeleteDialogState",value:function(e){e?this.handleCloseEditMenu():this.setState({portfolioName:"",duplicateKeyError:!1,duplicateKeyHelperText:""}),this.setState({deleteDialogState:e})}},{key:"handleAddPortfolio",value:function(){var e=this;if(""===this.state.portfolioName)this.setState({duplicateKeyError:!0,duplicateKeyHelperText:"Portfolio name cannot be empty"});else if(0===this.props.portfolios.filter((function(t){return t.name===e.state.portfolioName})).length){this.props.clearCurrentWorkFromLocal();var t={_id:void 0,name:this.state.portfolioName,pages:void 0};this.props.saveCurrentWorkToLocal(t),this.props.history.push("/edit")}else this.setState({duplicateKeyError:!0,duplicateKeyHelperText:"Portfolio name already exists"})}},{key:"handleOpenPortfolio",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget.id,e.next=3,S()({method:"GET",url:"https://resumate.xyz/api/portfolio/"+a,withCredentials:!0}).then(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("portfolio ".concat(t.data.portfolio.name," fetched")),e.next=3,n.props.saveCurrentWorkToLocal(t.data.portfolio);case 3:n.props.history.push("/edit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G(e,n.props.history)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeletePortfolio",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({method:"DELETE",url:"https://resumate.xyz/api/portfolio/delete/"+this.state.currentPortfolio_Id,withCredentials:!0}).then(function(){var e=Object(u.a)(d.a.mark((function e(a){var n,i,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.data.message),e.next=3,t.props.fetchPortfolios(t.props.id);case 3:n=0,i=Object.keys(t.state.images[t.state.currentPortfolio_Id]);case 4:if(!(n<i.length)){e.next=11;break}return r=i[n],e.next=8,t.handleDeleteImage(r);case 8:n++,e.next=4;break;case 11:delete(o=t.state.images)[t.state.currentPortfolio_Id],t.setState({images:o});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G(e,t.props.history)}));case 2:this.handleDeleteDialogState(!1);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleOpenEditMenu",value:function(e){this.setState({anchorEl:e.currentTarget,currentPortfolio_Id:e.currentTarget.id})}},{key:"handleCloseEditMenu",value:function(){this.setState({anchorEl:null})}},{key:"handleChangeNameDialogState",value:function(e){e?this.handleCloseEditMenu():this.setState({changedName:"",duplicateKeyError:!1,duplicateKeyHelperText:""}),this.setState({changeNameDialogState:e})}},{key:"handleChangePortfolioName",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.changedName){e.next=4;break}this.setState({duplicateKeyError:!0,duplicateKeyHelperText:"Portfolio name cannot be empty"}),e.next=16;break;case 4:if(0!==this.props.portfolios.filter((function(e){return e.name===n.state.changedName})).length){e.next=15;break}return t=this.props.portfolios.find((function(e){return e._id===n.state.currentPortfolio_Id})),(a=Object(j.a)({},t)).name=this.state.changedName,e.next=10,S()({method:"PUT",url:"https://resumate.xyz/api/portfolio/updatePortfolio",withCredentials:!0,data:{portfolio:a}}).then((function(e){console.log(e.data.message)})).catch((function(e){G(e,n.props.history)}));case 10:return e.next=12,this.props.fetchPortfolios(this.props.id);case 12:this.handleChangeNameDialogState(!1),e.next=16;break;case 15:this.setState({duplicateKeyError:!0,duplicateKeyHelperText:"Portfolio name already exists"});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleGetImage",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({method:"GET",url:"https://resumate.xyz/api/portfolio/getImageRefs/"+t,withCredentials:!0}).then(function(){var e=Object(u.a)(d.a.mark((function e(n){var i,r,o,s,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n.data.message),i=n.data.images,r=a.state.images,o=Object(Te.a)(i),e.prev=4,l=d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.value,e.next=3,S()({method:"GET",url:"https://resumate.xyz/api/portfolio/getImage/"+t,withCredentials:!0,responseType:"blob",params:{label:a.label}}).then((function(e){console.log("image ".concat(a.label," fetched"));var n={};n[a.label]=URL.createObjectURL(e.data),r[t]=n})).catch((function(e){e.response?console.log(e.response.data):console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})),o.s();case 7:if((s=o.n()).done){e.next=11;break}return e.delegateYield(l(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),o.e(e.t1);case 16:return e.prev=16,o.f(),e.finish(16);case 19:a.setState({images:r});case 20:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G(e,a.props.history)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeleteImage",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({method:"DELETE",url:"https://resumate.xyz/api/portfolio/deleteImage/"+this.state.currentPortfolio_Id,withCredentials:!0,data:{label:t}}).then((function(e){console.log(e.data.message);var n=a.state.images,i=n[a.state.currentPortfolio_Id];void 0!==i&&(delete i[t],a.setState({images:n}))})).catch((function(e){G(e,a.props.history)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.portfolios,i=t.classes;return Object(Z.jsxs)("div",{className:i.root,children:[Object(Z.jsx)("div",{className:i.appBarSpacer}),Object(Z.jsxs)(U.a,{variant:"h2",component:"h3",children:["Here is your dashboard ",a,"!"]}),Object(Z.jsx)(_e.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:this.props.loading?Object(Z.jsx)(Ie.BeatLoader,{}):this.props.error?404===this.props.error.response.status?Object(Z.jsx)(U.a,{variant:"h6",children:"Create your first Portfolio!"}):Object(Z.jsx)(U.a,{variant:"h6",children:this.props.error.message}):0===n.length?Object(Z.jsx)(U.a,{variant:"h6",children:"Oops. It appears that you have no saved Portfolios"}):n.map((function(t,a){return Object(Z.jsxs)(ze.a,{className:i.cardRoot,children:[Object(Z.jsxs)("div",{className:i.cardDetails,children:[Object(Z.jsx)(Ge.a,{children:Object(Z.jsx)(U.a,{component:"h5",variant:"h5",children:t.name})}),Object(Z.jsxs)(qe.a,{className:i.cardControls,children:[Object(Z.jsx)(q.a,{id:t._id,className:i.portfolioButton,"aria-controls":"edit-menu","aria-haspopup":"true",onClick:e.handleOpenEditMenu,children:Object(Z.jsx)(te.FaRegEdit,{})}),Object(Z.jsx)("span",{style:{width:"15vh"}}),Object(Z.jsx)(q.a,{id:t._id,className:i.portfolioButton,onClick:e.handleOpenPortfolio,children:"Open"})]})]}),Object(Z.jsx)(We.a,{component:"img",className:i.cardMedia,height:"150",width:"150",src:void 0===e.state.images[t._id]||void 0===e.state.images[t._id].preview?e.state.defaultPreviewSrc:e.state.images[t._id].preview})]},a)}))}),Object(Z.jsx)(q.a,{onClick:this.handleNameDialogOpen,className:i.portfolioButton,children:"Add a Portfolio"}),Object(Z.jsxs)(He.a,{id:"edit-menu",anchorEl:this.state.anchorEl,style:{display:"inline-block"},keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleCloseEditMenu,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:[Object(Z.jsx)(Je.a,{style:{display:"inline"},onClick:function(){return e.handleDeleteDialogState(!0)},children:"Delete"}),Object(Z.jsx)(Je.a,{style:{display:"inline"},onClick:function(){return e.handleChangeNameDialogState(!0)},children:"Change Name"})]}),Object(Z.jsxs)(Re.a,{open:this.state.nameDialogState,onClose:this.handleNameDialogClose,"aria-labelledby":"portfolio name dialog",fullWidth:!0,children:[Object(Z.jsx)(Me.a,{id:"portfolio-name-dialog-title",children:"Portfolio Name"}),Object(Z.jsxs)(Ae.a,{children:[Object(Z.jsx)(Ue.a,{children:"Set your Portfolio name here."}),Object(Z.jsx)(Le.a,{name:"portfolioName",autoFocus:!0,margin:"dense",label:"Portfolio Name",type:"string",defaultValue:this.state.portfolioName,fullWidth:!0,onChange:this.handleOnChange,InputLabelProps:{style:{color:"whitesmoke"}},InputProps:{color:"secondary"},error:this.state.duplicateKeyError,helperText:this.state.duplicateKeyHelperText})]}),Object(Z.jsxs)(Be.a,{children:[Object(Z.jsx)(q.a,{onClick:this.handleNameDialogClose,children:"Cancel"}),Object(Z.jsx)(q.a,{onClick:this.handleAddPortfolio,children:"Set Name"})]})]}),Object(Z.jsxs)(Re.a,{open:this.state.deleteDialogState,onClose:function(){return e.handleDeleteDialogState(!1)},"aria-labelledby":"delete-confirmation-dialog","aria-describedby":"delete-confirmation-dialog",fullWidth:!0,children:[Object(Z.jsx)(Me.a,{id:"delete-confirmation-title",children:"Delete Portfolio Confirmation"}),Object(Z.jsx)(Ae.a,{children:Object(Z.jsx)(Ue.a,{id:"delete-confirmation-description",style:{color:"white"},children:"Are you sure you want to delete this Portfolio? This action is irreversible and your portfolio will be deleted permanently."})}),Object(Z.jsxs)(Be.a,{children:[Object(Z.jsx)(q.a,{onClick:function(){return e.handleDeleteDialogState(!1)},children:"Cancel"}),Object(Z.jsx)(q.a,{onClick:this.handleDeletePortfolio,children:"Delete"})]})]}),Object(Z.jsxs)(Re.a,{open:this.state.changeNameDialogState,onClose:function(){return e.handleChangeNameDialogState(!1)},"aria-labelledby":"change-name-dialog","aria-describedby":"change-name-dialog",fullWidth:!0,children:[Object(Z.jsx)(Me.a,{id:"change-name-dialog-title",children:"Change Portfolio Name"}),Object(Z.jsxs)(Ae.a,{children:[Object(Z.jsx)(Ue.a,{children:"Type your new portfolio name here."}),Object(Z.jsx)(Le.a,{name:"changedName",autoFocus:!0,margin:"dense",label:"New Portfolio Name",type:"string",defaultValue:this.state.changedName,fullWidth:!0,onChange:this.handleOnChange,InputLabelProps:{style:{color:"whitesmoke"}},InputProps:{color:"secondary"},error:this.state.duplicateKeyError,helperText:this.state.duplicateKeyHelperText})]}),Object(Z.jsxs)(Be.a,{children:[Object(Z.jsx)(q.a,{onClick:function(){return e.handleChangeNameDialogState(!1)},children:"Cancel"}),Object(Z.jsx)(q.a,{onClick:this.handleChangePortfolioName,children:"Change"})]})]})]})}}]),a}(r.Component),Ye={repopulate_state:w,fetchPortfolios:R,saveCurrentWorkToLocal:_,clearCurrentWorkFromLocal:L},Ve=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn,name:e.login.name,id:e.login.id,portfolios:e.portfolio.portfolios,loading:e.portfolio.loading,error:e.portfolio.error}}),Ye)(Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center"},portfolioButton:{variant:"contained",size:"small",color:"primary"},cardRoot:{margin:e.spacing(1),display:"flex",flexDirection:"row",alignItems:"center"},cardDetails:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},cardControls:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},cardMedia:{width:151,height:151},appBarSpacer:e.mixins.toolbar}}))(Object(X.h)(Ke))),Xe=a(39),Ze=a(37),$e=a(297),Qe=a(290),et=a(76),tt=a(120),at=a.n(tt),nt=a(296),it=a(151),rt=a(300),ot=a(291),st=a(292),lt=a(288),ct=a(121),dt=a(122),ut=a(123),ht=a(124),pt=a(125),ft=a(126),gt=a(127),mt=a(128),bt=a(129),jt=a(130),vt=a(131),Ot=a(132),yt=a(133),xt=a(134),Ct=a(135),wt=a(136),kt=a(137),St=a(138),Nt=a(139),Dt=a(140),It={label:"Ant Design",icons:ct},Pt={label:"Bootstrap",icons:dt},Ft={label:"BoxIcons",icons:ut},Et={label:"Devicons",icons:ht},Tt={label:"Feather",icons:pt},_t={label:"Flat Color",icons:ft},Lt={label:"Font Awesome",icons:te},Rt={label:"Game Icons",icons:gt},Bt={label:"Github Octicons",icons:mt},At={label:"Grommet",icons:bt},Ut={label:"Heroicons",icons:jt},Mt={label:"IcoMoon",icons:vt},zt={label:"Ionicons 4",icons:Ot},Gt={label:"Ionicons 5",icons:yt},Wt={label:"Materal Design",icons:xt},qt={label:"Remix",icons:Ct},Ht={label:"Simple",icons:wt},Jt={label:"Typicons",icons:kt},Kt={label:"VS Code",icons:St},Yt={label:"Weather",icons:Nt},Vt={label:"css.gg",icons:Dt},Xt=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var i=JSON.parse(JSON.stringify(n.props.fields));return n.state={data:i,showEditor:!1,anchorEl:null,mediaAnchorEl:null,showIcon:!1,iconCategory:"ai",editSection:!1,currentSection:0,imageName:""},n.handleCreateEntry=n.handleCreateEntry.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleImageUpload=n.handleImageUpload.bind(Object(f.a)(n)),n.handleSectionView=n.handleSectionView.bind(Object(f.a)(n)),n.handleCloseEditor=n.handleCloseEditor.bind(Object(f.a)(n)),n.handleIconSelect=n.handleIconSelect.bind(Object(f.a)(n)),n.handleFont=n.handleFont.bind(Object(f.a)(n)),n.fileUploadRef=o.a.createRef(),n.imgColPickerRef=o.a.createRef(),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.loggedIn){var e=JSON.parse(window.localStorage.getItem("portfolioUser"));this.props.repopulate_state(e)}}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"handleChange",value:function(e,t,a){if(console.log(e),""===t)this.setState({data:Object(j.a)(Object(j.a)({},this.state.data),{},Object(b.a)({},e.target.name,e.target.value))});else if(void 0===a||!1===a){var n=Object(j.a)({},this.state.data[t]);n[e.target.name]=e.target.value,this.setState({data:Object(j.a)(Object(j.a)({},this.state.data),{},Object(b.a)({},t,n))})}else{var i=Object(Ze.a)(this.state.data.sections);i[this.state.currentSection].texts[e.target.name]=e.target.value,this.setState({data:Object(j.a)(Object(j.a)({},this.state.data),{},{sections:i})})}}},{key:"handleImageUpload",value:function(e){var t=this;console.log(this.state);var a=new FileReader;a.readAsDataURL(e.target.files[0]),a.onloadend=function(e){if(t.state.editSection){var a=Object(Ze.a)(t.state.data.sections);a[t.state.currentSection].images[t.state.imageName].src=e.target.result,a[t.state.currentSection].images[t.state.imageName].format="image",t.setState({data:Object(j.a)(Object(j.a)({},t.state.data),{},{sections:a}),mediaAnchorEl:null})}else t.setState({data:Object(j.a)(Object(j.a)({},t.state.data),{},{images:Object(j.a)(Object(j.a)({},t.state.data.images),{},Object(b.a)({},t.state.imageName,{src:e.target.result,format:"image"}))}),mediaAnchorEl:null})}}},{key:"handleDeleteSection",value:function(e){var t=this,a=this.state.data.sections.filter((function(e,a){return a!==t.state.currentSection}));this.setState({data:Object(j.a)(Object(j.a)({},this.state.data),{},{sections:a})})}},{key:"handleCreateEntry",value:function(){var e=JSON.parse(JSON.stringify(this.props.info.sections.defaultEntry));this.setState({data:Object(j.a)(Object(j.a)({},this.state.data),{},{sections:[].concat(Object(Ze.a)(this.state.data.sections),[e])})})}},{key:"handleSectionView",value:function(e){var t=this.state.currentSection+e;t<0?t=this.state.data.sections.length:t>this.state.data.sections.length&&(t=0),this.setState({currentSection:t})}},{key:"handleCloseEditor",value:function(e){e?this.props.onClose(this.state.data,!0):this.props.onClose(null,!1),this.setState({showEditor:!1})}},{key:"handleFont",value:function(e,t,a){void 0===t?this.setState({anchorEl:e.currentTarget}):this.setState({data:Object(j.a)(Object(j.a)({},this.state.data),{},{fonts:Object(j.a)(Object(j.a)({},this.state.data.fonts),{},Object(b.a)({},t,a))}),anchorEl:null})}},{key:"handleIconSelect",value:function(e){var t="".concat(this.state.iconCategory,"/").concat(e);if(console.log("test"),this.state.editSection){var a=Object(Ze.a)(this.state.data.sections);a[this.state.currentSection].images[this.state.imageName].src=t,a[this.state.currentSection].images[this.state.imageName].format="icon",this.setState({data:Object(j.a)(Object(j.a)({},this.state.data),{},{sections:a}),showIcon:!1,mediaAnchorEl:null})}else this.setState({data:Object(j.a)(Object(j.a)({},this.state.data),{},{images:Object(j.a)(Object(j.a)({},this.state.data.images),{},Object(b.a)({},this.state.imageName,{src:t,format:"icon"}))}),showIcon:!1,mediaAnchorEl:null})}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(Z.jsxs)("div",{"data-html2canvas-ignore":"true",children:[Object(Z.jsx)(Qe.a,{className:t.editFAB,onClick:function(){var t=JSON.parse(JSON.stringify(e.props.fields));e.setState({data:t,currentSection:0,showEditor:!0})},children:Object(Z.jsx)(te.FaEdit,{})}),Object(Z.jsx)(it.a,{className:t.modal,open:this.state.showEditor,onClose:function(){return e.handleCloseEditor(!0)},"aria-labelledby":"Entry editor","aria-describedby":"Edit your entry fields here",children:Object(Z.jsxs)("div",{className:t.root,children:[Object(Z.jsx)(U.a,{component:"h3",variant:"h3",children:"Entry editor"}),Object(Z.jsx)("input",{accept:"image/*",className:t.imgInput,style:{display:"none"},ref:this.fileUploadRef,type:"file",onChange:this.handleImageUpload}),Object(Z.jsx)("input",{type:"color",ref:this.imgColPickerRef,onChange:function(t){if(e.state.editSection){var a=Object(Ze.a)(e.state.data.sections);a[e.state.currentSection].images[e.state.imageName].src=t.target.value,a[e.state.currentSection].images[e.state.imageName].format="colour",e.setState({data:Object(j.a)(Object(j.a)({},e.state.data),{},{sections:a}),mediaAnchorEl:null})}else e.setState({data:Object(j.a)(Object(j.a)({},e.state.data),{},{images:Object(j.a)(Object(j.a)({},e.state.data.images),{},Object(b.a)({},e.state.imageName,{src:t.target.value,format:"colour"}))}),mediaAnchorEl:null})},onBlur:function(){return console.log("asda")},style:{display:"none"}}),Object(Z.jsx)(it.a,{open:this.state.showIcon,"aria-labelledby":"icon selection modal","aria-describedby":"a modal for users to pick an icon",className:t.modal,children:Object(Z.jsxs)("div",{children:[Object(Z.jsx)(rt.a,{name:"iconCategory",value:this.state.iconCategory,onChange:function(t,a){return e.setState({iconCategory:a})},variant:"scrollable",scrollButtons:"auto",children:Object.entries(i).map((function(e){var t=Object(Xe.a)(e,2),a=t[0],n=t[1];return Object(Z.jsx)(ot.a,{label:n.label,value:a})}))}),Object(Z.jsx)("div",{className:t.gridDiv,children:Object.entries(i[this.state.iconCategory].icons).map((function(t){var a=Object(Xe.a)(t,2),n=a[0],i=a[1];return Object(Z.jsxs)(st.a,{onClick:function(){return e.handleIconSelect(n)},children:[Object(Z.jsx)(i,{}),Object(Z.jsx)(U.a,{children:n})]})}))})]})}),Object(Z.jsxs)("div",{className:t.rowDiv,children:[Object(Z.jsxs)("div",{className:t.styleDiv,children:[Object(Z.jsx)(Le.a,{id:"width",label:"width",name:"width",value:this.state.data.width,margin:"normal",variant:"outlined",onChange:function(t){return e.handleChange(t,"")},className:t.styleInput}),Object(Z.jsx)(Le.a,{id:"height",label:"height",name:"height",value:this.state.data.height,margin:"normal",variant:"outlined",onChange:function(t){return e.handleChange(t,"")},className:t.styleInput}),Object.entries(this.state.data.fonts).map((function(t){var a=Object(Xe.a)(t,2),n=a[0],i=a[1];return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(q.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(t){return e.handleFont(t)},children:Object(Z.jsx)(U.a,{variant:"inherit",style:{fontFamily:i},children:e.props.info.fonts[n].label})}),Object(Z.jsx)(He.a,{name:n,id:n,anchorEl:e.state.anchorEl,keepMounted:!0,open:Boolean(e.state.anchorEl),onClose:function(){return e.setState({anchorEl:null})},children:pe.map((function(t){return Object(Z.jsx)(Je.a,{onClick:function(a){return e.handleFont(a,n,t)},children:Object(Z.jsx)(U.a,{variant:"inherit",style:{fontFamily:t},children:t})})}))})]})})),Object.entries(this.state.data.colours).map((function(t){var a=Object(Xe.a)(t,2),n=a[0],i=a[1];return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(lt.a,{type:"color",name:n,id:n,value:i,onChange:function(t){return e.handleChange(t,"colours")},style:{width:"100%"}}),Object(Z.jsx)(Le.a,{name:n,id:n,value:i,margin:"normal",variant:"outlined",onChange:function(t){return e.handleChange(t,"colours")}}),Object(Z.jsx)(U.a,{component:"h6",variant:"h6",children:e.props.info.colours[n].label})]})}))]}),Object(Z.jsxs)("div",{className:t.colDiv,children:[Object(Z.jsxs)("div",{className:t.rowDiv,children:[Object(Z.jsx)("div",{className:t.imgGrid,children:Object.entries(this.state.data.images).map((function(a){var n,r=Object(Xe.a)(a,2),o=r[0],s=r[1];switch(s.format){case"image":n=function(e){return Object(Z.jsx)("img",{src:s.src,className:t.imgPreview})};break;case"icon":var l=s.src.split("/");n=i[l[0]].icons[l[1]];break;case"colour":n=function(e){return Object(Z.jsx)("div",{style:{backgroundColor:s.src,height:100,width:100}})}}return Object(Z.jsxs)("div",{children:[Object(Z.jsxs)(q.a,{"aria-controls":"media-menu","aria-haspopup":"true",onClick:function(t){return e.setState({mediaAnchorEl:t.currentTarget,imageName:o,editSection:!1})},children:[Object(Z.jsx)(n,{}),Object(Z.jsx)(U.a,{children:e.props.info.images[o].label})]}),Object(Z.jsx)(He.a,{id:"media-menu",anchorEl:e.state.mediaAnchorEl,keepMounted:!0,open:Boolean(e.state.mediaAnchorEl)&&!e.state.editSection&&e.state.imageName===o,onClose:function(){return e.setState({mediaAnchorEl:null})},children:e.props.info.images[o].format.map((function(t){switch(t){case"image":return Object(Z.jsx)(Je.a,{onClick:function(){e.fileUploadRef.current.click()},children:t});case"icon":var a=s.src.split("/");return Object(Z.jsx)(Je.a,{onClick:function(){return e.setState({showIcon:!0,iconCategory:a[0]})},children:t});case"colour":return Object(Z.jsx)(Je.a,{onClick:function(){return e.imgColPickerRef.current.click()},children:t})}}))})]})}))}),Object(Z.jsx)("div",{className:t.textGrid,children:Object.entries(this.state.data.texts).map((function(t){var a=Object(Xe.a)(t,2),n=a[0],i=a[1];return Object(Z.jsx)("div",{children:Object(Z.jsx)(Le.a,{name:n,id:n,label:e.props.info.texts[n].label,value:i,margin:"normal",variant:"outlined",onChange:function(t){return e.handleChange(t,"texts")}})})}))})]}),this.props.info.sections.enabled&&Object(Z.jsxs)("div",{className:t.sectionDiv,children:[Object(Z.jsx)(st.a,{id:"left",onClick:function(){return e.handleSectionView(-1)},children:Object(Z.jsx)(te.FaChevronLeft,{})}),this.state.currentSection===this.state.data.sections.length?Object(Z.jsxs)("div",{className:t.colDiv,children:[Object(Z.jsx)(U.a,{component:"h4",variant:"h4",className:t.colDiv,children:"Add new section"}),Object(Z.jsx)("div",{className:t.addSectionSpacer}),Object(Z.jsx)(st.a,{onClick:this.handleCreateEntry,children:Object(Z.jsx)(te.FaPlus,{})})]}):Object(Z.jsxs)("div",{className:t.colDiv,children:[Object(Z.jsxs)("div",{className:t.rowDiv,children:[Object(Z.jsxs)(U.a,{component:"h4",variant:"h4",className:t.colDiv,children:["Section ",this.state.currentSection+1]}),Object(Z.jsx)(st.a,{onClick:function(t){return e.handleDeleteSection(t)},children:Object(Z.jsx)(te.FaTrashAlt,{})})]}),Object(Z.jsxs)("div",{className:t.rowDiv,children:[Object(Z.jsx)("div",{className:t.imgGrid,children:Object.entries(this.state.data.sections[this.state.currentSection].images).map((function(a){var n,r=Object(Xe.a)(a,2),o=r[0],s=r[1];switch(s.format){case"image":n=function(e){return Object(Z.jsx)("img",{src:s.src,className:t.imgPreview})};break;case"icon":var l=s.src.split("/");n=i[l[0]].icons[l[1]];break;case"colour":n=function(e){return Object(Z.jsx)("div",{style:{backgroundColor:s.src,height:100,width:100}})}}return Object(Z.jsxs)("div",{children:[Object(Z.jsxs)(q.a,{"aria-controls":"media-menu","aria-haspopup":"true",onClick:function(t){return e.setState({mediaAnchorEl:t.currentTarget,imageName:o,editSection:!0})},children:[Object(Z.jsx)(n,{}),Object(Z.jsx)(U.a,{children:e.props.info.sections.entryFormat.images[o].label})]}),Object(Z.jsx)(He.a,{id:"media-menu",anchorEl:e.state.mediaAnchorEl,keepMounted:!0,open:Boolean(e.state.mediaAnchorEl)&&e.state.editSection&&e.state.imageName===o,onClose:function(){return e.setState({mediaAnchorEl:null})},children:e.props.info.sections.entryFormat.images[o].format.map((function(t){switch(t){case"image":return Object(Z.jsx)(Je.a,{onClick:function(){e.fileUploadRef.current.click()},children:t});case"icon":var a=s.src.split("/");return Object(Z.jsx)(Je.a,{onClick:function(){return e.setState({showIcon:!0,iconCategory:a[0]})},children:t});case"colour":return Object(Z.jsx)(Je.a,{onClick:e.imgColPickerRef.current.click(),children:t})}}))})]})}))}),Object(Z.jsx)("div",{className:t.textGrid,children:Object.entries(this.state.data.sections[this.state.currentSection].texts).map((function(t){var a=Object(Xe.a)(t,2),n=a[0],i=a[1];return Object(Z.jsx)("div",{children:Object(Z.jsx)(Le.a,{name:n,id:n,label:e.props.info.sections.entryFormat.texts[n].label,value:i,margin:"normal",variant:"outlined",onChange:function(t){return e.handleChange(t,"texts",!0)},multiline:!0,rowsMax:3})})}))})]})]}),Object(Z.jsx)(st.a,{id:"right",onClick:function(){return e.handleSectionView(1)},children:Object(Z.jsx)(te.FaChevronRight,{})})]})]})]}),Object(Z.jsxs)("div",{className:t.ctrlDiv,children:[Object(Z.jsxs)(Qe.a,{variant:"extended",onClick:function(){return e.handleCloseEditor(!0)},children:[Object(Z.jsx)(te.FaSave,{}),"Save"]}),Object(Z.jsxs)(Qe.a,{variant:"extended",onClick:function(){return e.handleCloseEditor(!1)},children:[Object(Z.jsx)(te.FaTimes,{}),"Cancel"]})]})]})})]})}}]),a}(r.Component),Zt={repopulate_state:w},$t=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn}}),Zt)(Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"5%",textAlign:"center",backgroundColor:"#444444",opacity:"90%"},modal:{overflowX:"hidden",overflowY:"auto",display:"flex",flexDirection:"column",padding:"1%"},floating:{margin:0,top:"auto",left:"auto",bottom:"8%",right:"5%",position:"fixed",textAlign:"center"},textGrid:{margin:"1vw",display:"grid",width:"100%",gridTemplateColumns:"repeat(auto-fill, 200px)"},imgGrid:{margin:"1vw",display:"grid",width:"100%",gridTemplateColumns:"repeat(auto-fill, 150px)"},imgPreview:{width:"5vw",height:"5vw"},sectionDiv:{width:"100%",display:"flex",flexDirection:"row",marginTop:"auto"},div:{padding:"10px"},rowDiv:{width:"100%",display:"flex",flexDirection:"row",overflow:"auto"},colDiv:{width:"100%",display:"flex",flexDirection:"column"},styleDiv:{display:"flex",flexDirection:"column",height:"100%",overflow:"auto"},addSectionSpacer:{height:e.spacing(5)},ctrlDiv:{display:"flex",flexDirection:"row",marginTop:"auto",marginLeft:"auto"},editFAB:{position:"absolute",marginTop:"2vw",marginLeft:"2vw"},gridDiv:{display:"grid",width:"100%",gridTemplateColumns:"repeat(auto-fill, 250px)",gridGap:"10px",justifyContent:"center",height:"80%",overflowY:"auto",overflowX:"hidden"},svgIcon:{width:100,height:100}}}))(Xt)),Qt=a.p+"static/media/IntroMinimalist.ec6700a1.JPG",ea=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){return Object(h.a)(this,a),t.call(this)}return Object(p.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.fields;return Object(Z.jsxs)("div",{className:a.root,style:(e={backgroundRepeat:!1,backgroundImage:"image"===n.images.bg.format?'url("'.concat(n.images.bg.src,'")'):"",backgroundColor:"colour"===n.images.bg.format?n.images.bg.src:"",backgroundSize:"cover"},Object(b.a)(e,"backgroundRepeat","no-repeat"),Object(b.a)(e,"width",n.width),Object(b.a)(e,"height",n.height),Object(b.a)(e,"minHeight","1000px"),Object(b.a)(e,"display","flex"),Object(b.a)(e,"flexDirection","row"),e),children:[Object(Z.jsx)(M.a,{}),Object(Z.jsx)("div",{style:{marginLeft:"auto",marginRight:"10%"},children:Object(Z.jsxs)(H.a,{className:a.textBox,children:[Object(Z.jsx)(U.a,{component:"h2",variant:"h2",style:{color:n.colours.secondary,fontFamily:"Arial, Helvetica, sans-serif"},children:"Hello! my name is"}),Object(Z.jsx)(U.a,{component:"h1",variant:"h1",style:{color:n.colours.primary,fontFamily:"".concat(n.fonts.titleFont,", Arial, Helvetica, sans-serif")},children:n.texts.name}),Object(Z.jsx)(U.a,{component:"h2",variant:"h2",style:{color:n.colours.secondary,fontFamily:"Arial, Helvetica, sans-serif"},children:n.texts.status})]})}),Object(Z.jsx)("img",{src:n.images.dp.src,alt:"my portrait",style:{height:"100%",width:"auto",marginRight:"auto"}})]})}}]),a}(r.Component);ea.templateName="Minimalist",ea.preview=Qt,ea.info={fonts:{titleFont:{label:"title font"}},colours:{primary:{label:"primary"},secondary:{label:"secondary"}},images:{dp:{label:"Your portrait photo",format:["image"]},bg:{label:"Entry background",format:["image","colour"]}},texts:{name:{label:"Your full name"},status:{label:"your current position"}},sections:{}},ea.script=function(e){return""},ea.defaultField={width:"100%",height:"80vh",fonts:{titleFont:"Roboto"},colours:{primary:"#d19a19",secondary:"#000000"},images:{dp:{src:"https://bit.ly/3fRv2Y2",format:"image"},bg:{src:"https://bit.ly/2RWO4Ei",format:"image"}},texts:{name:"Port Folio",status:"UI/UX developer"},sections:[]};var ta=Object(W.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},std:{display:"block"},textBox:{backgroundColor:"#FFFFFF",opacity:"75%",padding:"15%",width:"max-content"}}}))(ea),aa=a.p+"static/media/TimelineMinimalist.58a9e55e.JPG",na=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){return Object(h.a)(this,a),t.call(this)}return Object(p.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.fields;return Object(Z.jsxs)("div",{className:a.root,style:(e={backgroundRepeat:!1,backgroundImage:'url("'.concat(n.images.bg.src,'")'),backgroundSize:"cover"},Object(b.a)(e,"backgroundRepeat","no-repeat"),Object(b.a)(e,"width",n.width),Object(b.a)(e,"height",n.height),Object(b.a)(e,"display","flex"),Object(b.a)(e,"flexDirection","column"),Object(b.a)(e,"textAlign","center"),e),children:[Object(Z.jsx)(M.a,{}),Object(Z.jsx)(U.a,{component:"h2",variant:"h2",style:{color:n.colours.primary,fontFamily:"".concat(n.fonts.titleFont,", Helvetica, sans-serif")},className:a.title,children:n.texts.title}),n.sections.map((function(e,t){return Object(Z.jsxs)("div",{className:a.section,children:[Object(Z.jsx)("img",{src:e.images.timelineImage.src,className:a.timelineImg}),Object(Z.jsxs)("div",{className:a.sectionTextDiv,children:[Object(Z.jsx)(U.a,{style:{color:n.colours.secondary},component:"h5",variant:"h5",children:e.texts.timelineDate}),Object(Z.jsx)(U.a,{style:{color:n.colours.secondary},component:"h5",variant:"h5",children:e.texts.timelineTitle})]})]})}))]})}}]),a}(r.Component);na.templateName="Minimalist",na.script=function(e){return""},na.preview=aa,na.info={fonts:{titleFont:{label:"title font"}},colours:{primary:{label:"primary"},secondary:{label:"secondary"}},images:{bg:{label:"Entry background",format:["image"]}},texts:{title:{label:"Timeline title"}},sections:{enabled:!0,defaultEntry:{images:{timelineImage:{src:"https://bit.ly/3c3wsNL",format:"image"}},texts:{timelineTitle:"New section",timelineDate:"2077"}},entryFormat:{images:{timelineImage:{label:"Event Image",format:["image"]}},texts:{timelineTitle:{label:"Event name"},timelineDate:{label:"Event date"}}}}},na.defaultField={width:"100%",height:"fit-content",fonts:{titleFont:"roboto"},colours:{primary:"#d19a19",secondary:"#000000"},images:{bg:{src:"https://bit.ly/3i3I9I2",format:"image"}},texts:{title:"My past experiences"},sections:[{images:{timelineImage:{src:"https://bit.ly/3hXPM2R",format:"image"}},texts:{timelineTitle:"Portfolio Deployed on Github!",timelineDate:"2021"}},{images:{timelineImage:{src:"https://bit.ly/3c3wsNL",format:"image"}},texts:{timelineTitle:"Portfolio added to resume",timelineDate:"2021"}}]};var ia=Object(W.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},std:{display:"block"},timelineImg:{borderRadius:"50%",height:"5vw",width:"5vw"},title:{margin:"5%"},section:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",textAlign:"left",width:"50%",margin:"1%"},sectionTextDiv:{marginLeft:"3%",display:"flex",flexDirection:"column"}}}))(na),ra=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.fields;return Object(Z.jsx)("div",{className:t.root,children:Object(Z.jsx)(ze.a,{style:{textAlign:"center"},children:Object(Z.jsxs)(Ge.a,{children:[Object(Z.jsx)(U.a,{variant:"h1",component:"h2",style:{color:a.colours.primary,backgroundColor:a.colours.header,fontFamily:"".concat(a.fonts.titleFont,", Arial, Helvetica, sans-serif")},children:"About Me"}),Object(Z.jsx)(U.a,{variant:"h3",component:"h4",style:{color:a.colours.secondary,backgroundColor:"white",fontFamily:"".concat(a.fonts.bodyFont,", Arial, Helvetica, sans-serif")},children:a.texts.about})]})})})}}]),a}(r.Component);ra.templateName="Minimalist",ra.info={fonts:{titleFont:{label:"title font"},bodyFont:{label:"body font"}},colours:{primary:{label:"primary"},secondary:{label:"secondary"},header:{label:"header"}},images:{},texts:{about:{label:"Self Introduction"}},sections:{}},ra.preview="https://bit.ly/3fwsFKX",ra.script=function(e){return""},ra.defaultField={width:"60%",height:"80vh",fonts:{titleFont:"title font",bodyFont:"body font"},colours:{primary:"#ffffff",secondary:"#d5d5d5",header:"#e30000"},images:{},texts:{about:"Send Help"},sections:[]};var oa=Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"start",padding:"1rem",alignItems:"center",width:"100%",height:"auto"}}}))(ra),sa=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){return Object(h.a)(this,a),t.call(this)}return Object(p.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.fields;return Object(Z.jsxs)("div",{className:a.root,style:(e={backgroundRepeat:!1,backgroundImage:'url("'.concat(n.images.bg.src,'")'),backgroundSize:"cover"},Object(b.a)(e,"backgroundRepeat","no-repeat"),Object(b.a)(e,"backgroundAttachment","fixed"),Object(b.a)(e,"width",n.width),Object(b.a)(e,"height",n.height),Object(b.a)(e,"display","flex"),Object(b.a)(e,"flexDirection","column"),Object(b.a)(e,"textAlign","center"),e),children:[Object(Z.jsx)(M.a,{}),Object(Z.jsxs)("div",{style:{padding:"5vh",paddingBlock:"10vh",backgroundColor:"#FFFFFF10",width:"100%",height:"100%",border:"solid 1px ".concat(n.colours.primary)},children:[Object(Z.jsx)(U.a,{component:"h1",variant:"h1",style:{color:n.colours.primary,fontFamily:"".concat(n.fonts.titleFont,", Arial, Helvetica, sans-serif")},children:n.texts.name}),Object(Z.jsx)(U.a,{component:"h2",variant:"h2",style:{color:n.colours.secondary,fontFamily:"".concat(n.fonts.titleFont,", Arial, Helvetica, sans-serif")},children:n.texts.status}),Object(Z.jsx)("div",{style:{display:"flex",flexDirection:"row",marginInline:"auto",width:"max-content",justifyContent:"center",alignItems:"center",height:"8vh",marginTop:"5vh"},children:n.sections.map((function(e,t){var n;if("icon"===e.images.socialIcon.format){var r=e.images.socialIcon.src.split("/");n=i[r[0]].icons[r[1]]}else n=Object(Z.jsx)("img",{src:e.images.socialIcon.src});return Object(Z.jsx)("div",{className:a.section,children:Object(Z.jsx)(st.a,{onClick:function(){return window.open(e.texts.socialLink)},className:a.socialButton,children:Object(Z.jsx)(n,{})})})}))})]})]})}}]),a}(r.Component);sa.templateName="Redline",sa.script=function(e){return""},sa.info={fonts:{titleFont:{label:"title font"}},colours:{primary:{label:"primary"},secondary:{label:"secondary"}},images:{bg:{label:"Entry background",format:["image"]}},texts:{name:{label:"Your name"},status:{label:"Your current status"}},sections:{enabled:!0,defaultEntry:{images:{socialIcon:{src:"fa/FaGithub",format:"icon"}},texts:{socialLink:"https://github.com"}},entryFormat:{images:{socialIcon:{label:"Icon",format:["image","icon"]}},texts:{socialLink:{label:"Link"}}}}},sa.defaultField={width:"100%",height:"fit-content",fonts:{titleFont:"Roboto"},colours:{primary:"#dd0000",secondary:"#FFFFFF"},images:{bg:{src:"https://bit.ly/3gSDGpJ",format:"image"}},texts:{name:"Lorem Ipsum",status:"Developer"},sections:[{images:{socialIcon:{src:"fa/FaGithub",format:"icon"}},texts:{socialLink:"https://github.com"}}]};var la=Object(W.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"15vh"},std:{display:"block"},title:{margin:"5%"},socialButton:{height:"7vh",width:"7vh",borderRadius:"50%",opacity:"60%",marginInline:"0.5vh","&:hover":{opacity:"80%",width:"9vh",height:"9vh"}},socialIcon:{height:"5vh",width:"5vh",borderRadius:"50%"}}}))(sa),ca={introduction:[{name:ta.templateName,preview:ta.preview,component:function(e,t){return Object(Z.jsx)(ta,{fields:e,id:t})},script:ta.script,info:ta.info,defaultField:ta.defaultField},{name:la.templateName,preview:la.preview,component:function(e,t){return Object(Z.jsx)(la,{fields:e,id:t})},script:la.script,info:la.info,defaultField:la.defaultField}],about:[{name:oa.templateName,preview:oa.preview,component:function(e,t){return Object(Z.jsx)(oa,{fields:e,id:t})},script:oa.script,info:oa.info,defaultField:oa.defaultField}],timeline:[{name:ia.templateName,preview:ia.preview,component:function(e,t){return Object(Z.jsx)(ia,{fields:e,id:t})},script:ia.script,info:ia.info,defaultField:ia.defaultField}]},da=a(78),ua=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={showSelector:!1,type:"introduction",style:0},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleCloseSelector=n.handleCloseSelector.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.loggedIn){var e=JSON.parse(window.localStorage.getItem("portfolioUser"));this.props.repopulate_state(e)}}},{key:"handleChange",value:function(e,t){this.setState({type:t})}},{key:"handleSelect",value:function(e){this.handleCloseSelector({type:this.state.type,style:e})}},{key:"handleCloseSelector",value:function(e){void 0!==e&&this.props.onClose(e),this.setState({showSelector:!1})}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(Qe.a,{className:t.controlFAB,onClick:function(){return e.setState({showSelector:!0})},children:Object(Z.jsx)(te.FaPlus,{})}),Object(Z.jsx)(it.a,{className:t.modal,open:this.state.showSelector,onClose:function(){return e.handleCloseSelector()},"aria-labelledby":"Template Selector","aria-describedby":"Select a template.",children:Object(Z.jsxs)("div",{className:t.root,children:[Object(Z.jsx)(rt.a,{value:this.state.type,onChange:this.handleChange,variant:"scrollable",scrollButtons:"auto",children:Object.keys(ca).map((function(e){return Object(Z.jsx)(ot.a,{label:e,value:e})}))}),Object(Z.jsx)("div",{className:t.cardDiv,children:ca[this.state.type].map((function(a,n){return Object(Z.jsx)(ze.a,{className:t.card,children:Object(Z.jsxs)(da.a,{focusRipple:!0,className:t.buttonBase,onClick:function(){return e.handleSelect(n)},name:n,children:[Object(Z.jsx)(We.a,{component:"img",alt:a.name,image:a.preview,title:a.name,className:t.cardMedia}),Object(Z.jsx)(Ge.a,{children:Object(Z.jsx)(U.a,{children:a.name})})]},n)})}))}),Object(Z.jsxs)(Qe.a,{variant:"extended",onClick:function(){return e.handleCloseSelector()},className:t.fab,children:[Object(Z.jsx)(te.FaTimes,{}),"CANCEL"]})]})})]})}}]),a}(r.Component),ha={repopulate_state:w},pa=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn}}),ha)(Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"2%",textAlign:"center",backgroundColor:"#444444",opacity:"90%",height:"100%",overflowX:"hidden",overflowY:"auto"},modal:{overflowX:"hidden",overflowY:"auto",display:"flex",flexDirection:"column",padding:"5vh",height:"100%"},buttonBase:{width:"100%",height:"100%",flexDirection:"column"},card:{width:345,minHeight:150,display:"flex",flexDirection:"column"},cardMedia:{maxHeight:200,overflow:"hidden"},fab:{marginTop:"auto",marginLeft:"auto"},cardDiv:{display:"grid",width:"100%",gridTemplateColumns:"repeat(auto-fill, 345px)",gridGap:"55px",justifyContent:"center",overflowY:"auto"},controlFAB:{position:"static",marginRight:"0.5vw",marginBottom:"0.5vw"}}}))(ua)),fa=a(303),ga=a(294),ma=a(228),ba=a(293),ja=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={finalizeDialogState:!1,overrideDialogState:!1,repositoryName:"",repositoryContent:[],anchorEl:null,publishLoading:!1,statusState:!1,publishError:!1,publishErrorMessage:"",pageUrl:"",pageCheckIntervalTask:null},n.handleOnChange=n.handleOnChange.bind(Object(f.a)(n)),n.handleFinalizeDialogOpen=n.handleFinalizeDialogOpen.bind(Object(f.a)(n)),n.handleFinalizeDialogClose=n.handleFinalizeDialogClose.bind(Object(f.a)(n)),n.handleOverrideDialogOpen=n.handleOverrideDialogOpen.bind(Object(f.a)(n)),n.handleOverrideDialogClose=n.handleOverrideDialogClose.bind(Object(f.a)(n)),n.handleFinalizeEdits=n.handleFinalizeEdits.bind(Object(f.a)(n)),n.handleOverrideAllowed=n.handleOverrideAllowed.bind(Object(f.a)(n)),n.handlePushToGithub=n.handlePushToGithub.bind(Object(f.a)(n)),n.handleCheckPageStatus=n.handleCheckPageStatus.bind(Object(f.a)(n)),n.handleStatusClose=n.handleStatusClose.bind(Object(f.a)(n)),n.handleCopyClipboard=n.handleCopyClipboard.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"handleOnChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"handleFinalizeDialogOpen",value:function(){var e=this.props.createPushables();console.log(e),this.setState({repositoryContent:e}),this.setState({anchorEl:null,finalizeDialogState:!0})}},{key:"handleFinalizeDialogClose",value:function(){this.setState({finalizeDialogState:!1})}},{key:"handleOverrideDialogOpen",value:function(){this.setState({overrideDialogState:!0})}},{key:"handleOverrideDialogClose",value:function(){this.setState({overrideDialogState:!1})}},{key:"handleOverrideAllowed",value:function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Override permission given to push to ".concat(this.state.repositoryName," and toggle pages for it")),this.handlePushToGithub(),this.setState({overrideDialogState:!1});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePushToGithub",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("files are being pushed to ".concat(this.state.repositoryName)),this.setState({publishLoading:!0,publishError:!1,publishErrorMessage:"",statusState:!1,pageCheckIntervalTask:setInterval(this.handleCheckPageStatus,15e3)}),e.next=4,S()({method:"PUT",url:"https://resumate.xyz/api/portfolio/publishGithub",withCredentials:!0,data:{route:"",content:this.state.repositoryContent,repo:this.state.repositoryName}}).then((function(e){console.log(e.data.message)})).catch((function(e){G(e,t.props.history),t.setState({publishLoading:!1,publishError:!0,publishErrorMessage:"Failed to push files to Github",statusState:!0}),t.state.pageCheckIntervalTask&&window.clearInterval(t.state.pageCheckIntervalTask)}));case 4:this.setState({repositoryContent:[]});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFinalizeEdits",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("chosen repository name is "+this.state.repositoryName),e.next=3,S()({method:"GET",url:"https://resumate.xyz/api/portfolio/checkExistingRepos",withCredentials:!0,params:{repo:this.state.repositoryName}}).then(function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.data.message),e.next=3,S()({method:"POST",url:"https://resumate.xyz/api/portfolio/createRepo",withCredentials:!0,data:{repo:t.state.repositoryName}}).then((function(e){console.log(e.data.message)})).catch((function(e){G(e,t.props.history)}));case 3:t.handlePushToGithub();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G(e,t.props.history),t.setState({overrideDialogState:!0})}));case 3:this.setState({finalizeDialogState:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCheckPageStatus",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.repositoryName){e.next=3;break}return e.next=3,S()({method:"GET",url:"https://resumate.xyz/api/portfolio/pageStatus",withCredentials:!0,params:{repo:this.state.repositoryName}}).then((function(e){console.log(e.data.status),"built"!==e.data.status&&"errored"!==e.data.status||(t.state.pageCheckIntervalTask&&window.clearInterval(t.state.pageCheckIntervalTask),"built"===e.data.status?t.setState({publishLoading:!1,pageUrl:e.data.url,statusState:!0}):t.setState({publishLoading:!1,publishError:!0,publishErrorMessage:"Github page deployment failed",statusState:!0}))})).catch((function(e){G(e,t.props.history)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleStatusClose",value:function(e,t){"clickaway"!==t&&this.setState({publishLoading:!1,publishError:!1,publishErrorMessage:"",statusState:!1})}},{key:"handleCopyClipboard",value:function(){navigator.clipboard.writeText(this.state.pageUrl)}},{key:"render",value:function(){var e=this.props.classes;return Object(Z.jsxs)("div",{className:e.root,children:[Object(Z.jsx)(Qe.a,{size:"large","aria-label":"publish panel","aria-controls":"simple-menu","aria-haspopup":"true",className:e.actionFAB,onClick:this.handleFinalizeDialogOpen,children:this.state.publishLoading?Object(Z.jsx)(ba.a,{size:"2rem"}):Object(Z.jsx)(te.FaUpload,{})}),Object(Z.jsx)(fa.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.statusState,onClose:this.handleStatusClose,TransitionComponent:function(e){return Object(Z.jsx)(ma.a,Object(j.a)(Object(j.a)({},e),{},{direction:"up"}))},children:Object(Z.jsx)(ga.a,{style:{backgroundColor:"#303030",color:"white"},message:this.state.publishError?this.state.publishErrorMessage:this.state.pageUrl,action:Object(Z.jsxs)(o.a.Fragment,{children:[this.state.publishError?Object(Z.jsx)("div",{}):Object(Z.jsx)(q.a,{onClick:this.handleCopyClipboard,children:Object(Z.jsx)(te.FaRegCopy,{})}),Object(Z.jsx)(q.a,{onClick:this.handleStatusClose,children:Object(Z.jsx)(te.FaTimes,{})})]})})},"Github Page Status"),Object(Z.jsxs)(Re.a,{open:this.state.finalizeDialogState,onClose:this.handleFinalizeDialogClose,"aria-labelledby":"repo name input",children:[Object(Z.jsx)(Me.a,{id:"repo name input",children:"Repository Name"}),Object(Z.jsxs)(Ae.a,{children:[Object(Z.jsx)(Ue.a,{style:{color:"white"},children:"Choose a Github repository name to save portfolio edits"}),Object(Z.jsx)(Le.a,{name:"repositoryName",autoFocus:!0,margin:"dense",label:"Repository Name",type:"string",defaultValue:this.state.repositoryName,fullWidth:!0,onChange:this.handleOnChange,InputLabelProps:{style:{color:"whitesmoke"}},InputProps:{color:"secondary"}})]}),Object(Z.jsxs)(Be.a,{children:[Object(Z.jsx)(q.a,{onClick:this.handleFinalizeDialogClose,children:"Cancel"}),Object(Z.jsx)(q.a,{onClick:this.handleFinalizeEdits,children:"Finalize"})]})]}),Object(Z.jsxs)(Re.a,{open:this.state.overrideDialogState,onClose:this.handleOverrideDialogClose,"aria-labelledby":"override permission input",children:[Object(Z.jsx)(Me.a,{id:"override permission input",children:"Warning!"}),Object(Z.jsx)(Ae.a,{children:Object(Z.jsx)(Ue.a,{children:"Repository already exists. This will override data in your existing repository and could lead to possible data loss! Do you still wish to continue?"})}),Object(Z.jsxs)(Be.a,{children:[Object(Z.jsx)(q.a,{onClick:this.handleOverrideDialogClose,children:"Cancel"}),Object(Z.jsx)(q.a,{onClick:this.handleOverrideAllowed,children:"Allow Override"})]})]})]})}}]),a}(r.Component),va={repopulate_state:w},Oa=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn}}),va)(Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center"},actionFAB:{position:"static",marginRight:"0.5vw",marginBottom:"0.5vw",textAlign:"center"}}}))(ja)),ya=a(295),xa=a(306),Ca=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={currentPage:n.props.dirTree,currentPath:[],showInput:!1,dirTree:n.props.dirTree,showDirectory:!1,dirName:"",inputMode:0,expanded:[]},n.handleSelectPage=n.handleSelectPage.bind(Object(f.a)(n)),n.renderTree=n.renderTree.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleDeletePage=n.handleDeletePage.bind(Object(f.a)(n)),n.handleRenameDirectory=n.handleRenameDirectory.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.loggedIn){var e=JSON.parse(window.localStorage.getItem("portfolioUser"));this.props.repopulate_state(e)}}},{key:"handleSelectPage",value:function(e,t,a){e.preventDefault(),this.setState({currentPage:t,currentPath:a})}},{key:"renderTree",value:function(e,t,a,n){var i=this;return Object(Z.jsx)(xa.a,{value:t,nodeId:t,label:t,classes:{root:a.treeItem,selected:a.treeItemSelected,content:a.treeItemContent,group:a.treeItemGroup},onLabelClick:function(t){return i.handleSelectPage(t,e,n)},children:Object.entries(e.directories).map((function(e){var t=Object(Xe.a)(e,2),r=t[0],o=t[1];return i.renderTree(o,r,a,[].concat(Object(Ze.a)(n),[r]))}))})}},{key:"getPage",value:function(e,t,a){if(a>=e.length){if(void 0===t)return;return t}return this.getPage(e,t.directories[e[a]],a+1)}},{key:"handleCreatePage",value:function(e){var t=JSON.parse(JSON.stringify(this.state.dirTree)),a=this.getPage(this.state.currentPath,t,0);console.log(this.state.currentPath),console.log(a),console.log(t);var n={directory:e,entries:[],directories:{},id:void 0};a.directories[e]=n,this.props.onUpdate(t),console.log(this.state),this.setState({dirTree:t,currentPage:a,showInput:!1})}},{key:"handleCloseDirectory",value:function(e){this.props.onClose(this.state.currentPage,this.state.currentPath),this.setState({showDirectory:!1})}},{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"handleRenameDirectory",value:function(){var e=Object(Ze.a)(this.state.currentPath),t=e.pop(),a=JSON.parse(JSON.stringify(this.state.dirTree)),n=this.getPage(e,a,0);n.directories[this.state.dirName]=n.directories[t],delete n.directories[t],this.props.onUpdate(a),this.setState({dirTree:a,currentPath:[].concat(Object(Ze.a)(e),[this.state.dirName]),currentPage:n.directories[this.state.dirName],dirName:"",showInput:!1})}},{key:"handleDeletePage",value:function(){var e=JSON.parse(JSON.stringify(this.state.dirTree)),t=Object(Ze.a)(this.state.currentPath);t===[]&&alert("Root directory cannot be deleted.");var a=t.pop(),n=this.getPage(t,e,0),i=Object(j.a)({},n.directories);delete i[a],n.directories=i,this.props.onUpdate(e),console.log(t),this.setState({dirTree:e,currentPage:n,currentPath:t})}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(Qe.a,{className:t.controlFAB,onClick:function(){return e.setState(Object(j.a)({showDirectory:!0,currentPage:e.props.dirTree,currentPath:[]},e.props.getState()))},children:Object(Z.jsx)(te.FaLink,{})}),Object(Z.jsx)(it.a,{className:t.modal,open:this.state.showDirectory,onClose:function(){return e.handleCloseDirectory(!0)},"aria-labelledby":"Directory Manager","aria-describedby":"Select a page.",children:Object(Z.jsxs)("div",{className:t.root,children:[Object(Z.jsx)(Qe.a,{variant:"extended",onClick:function(){e.handleCloseDirectory(!1)},children:Object(Z.jsx)(te.FaTimes,{})}),Object(Z.jsx)(ya.a,{defaultCollapseIcon:Object(Z.jsx)(te.FaTimes,{}),defaultExpandIcon:Object(Z.jsx)(te.FaSave,{}),expanded:this.state.expanded,onNodeToggle:function(t,a){return e.setState({expanded:a})},className:t.treeView,children:this.renderTree(this.state.dirTree,"root",t,[])}),Object(Z.jsx)(Le.a,{id:"dirName",label:"directory name",name:"dirName",value:this.state.dirName,margin:"normal",variant:"outlined",onChange:this.handleChange,className:this.state.showInput?t.textField:t.hide}),Object(Z.jsxs)(Qe.a,{variant:"extended",onClick:function(t){return e.setState({showInput:!0,inputMode:1})},className:this.state.showInput&&1===this.state.inputMode?t.hide:t.controlFAB,children:[Object(Z.jsx)(te.FaPlus,{}),"New page"]}),Object(Z.jsxs)(Qe.a,{variant:"extended",onClick:function(t){return e.setState({showInput:!0,inputMode:0})},className:this.state.showInput&&0===this.state.inputMode?t.hide:t.controlFAB,children:[Object(Z.jsx)(te.FaPlus,{}),"Rename page"]}),Object(Z.jsx)(Qe.a,{variant:"extended",onClick:function(t){return e.handleCreatePage(e.state.dirName)},className:this.state.showInput&&1===this.state.inputMode?t.controlFAB:t.hide,children:"Create"}),Object(Z.jsx)(Qe.a,{variant:"extended",onClick:function(t){return e.handleRenameDirectory(e.state.dirName)},className:this.state.showInput&&0===this.state.inputMode?t.controlFAB:t.hide,children:"Rename"}),Object(Z.jsx)(Qe.a,{variant:"extended",onClick:this.handleDeletePage,children:"Delete page"})]})})]})}}]),a}(r.Component),wa={repopulate_state:w},ka=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn}}),wa)(Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"2%",textAlign:"center",backgroundColor:"#444444",opacity:"90%",height:"100%"},modal:{overflow:"scroll",display:"flex",flexDirection:"column",padding:"5%",height:"100%"},controlFAB:{position:"static",marginRight:"0.5vw",marginBottom:"0.5vw"},treeItem:{"&$treeItemSelected > $treeItemContent":{backgroundColor:"#F00"}},treeItemSelected:{},treeItemExpanded:{},treeItemGroup:{marginLeft:7,paddingLeft:18,borderLeft:"1px dashed #FFF"},treeItemContent:{},treeView:{textAlign:"left"},textField:{},hide:{display:"none"}}}))(Ca)),Sa=a(141),Na=a.n(Sa),Da=a(142),Ia=a.n(Da),Pa=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={editMode:!0,portfolio_id:void 0,name:"",pages:{directory:"root",entries:[],directories:{},id:"root_mongo_id"},currentPage:void 0,currentPath:[],isTimerExist:!1},n.state.currentPage=n.state.pages,n.handleEditorClose=n.handleEditorClose.bind(Object(f.a)(n)),n.handleCreateFile=n.handleCreateFile.bind(Object(f.a)(n)),n.handleProduction=n.handleProduction.bind(Object(f.a)(n)),n.handleSelector=n.handleSelector.bind(Object(f.a)(n)),n.handleUpdatePages=n.handleUpdatePages.bind(Object(f.a)(n)),n.handleDirectory=n.handleDirectory.bind(Object(f.a)(n)),n.handleSavePortfolio=n.handleSavePortfolio.bind(Object(f.a)(n)),n.handleUploadPreview=n.handleUploadPreview.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedIn){e.next=12;break}return e.next=3,JSON.parse(window.localStorage.getItem("portfolioUser"));case 3:if(null===(t=e.sent)){e.next=12;break}return e.next=7,JSON.parse(window.localStorage.getItem("portfolioWork"));case 7:return a=e.sent,e.next=10,this.props.repopulate_state(t);case 10:return e.next=12,this.props.saveCurrentWork(a);case 12:this.props.loggedIn&&null!==this.props.currentPortfolio&&(this.setState({name:this.props.currentPortfolio.name}),void 0!==this.props.currentPortfolio._id&&void 0!==this.props.currentPortfolio.pages&&this.setState({portfolio_id:this.props.currentPortfolio._id,pages:this.props.currentPortfolio.pages,currentPage:this.props.currentPortfolio.pages}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderEntry",value:function(e,t){return ca[e.type][e.style].component(e,t)}},{key:"traverseDirectory",value:function(e,t){for(var a=e,n=0;n<t.length;n++)a=a.directories[t[n]];return a}},{key:"handleSelector",value:function(e){var t=e.type,a=e.style,n=JSON.parse(JSON.stringify(ca[t][a].defaultField)),i=Object(j.a)({type:t,style:a},n),r=Object(j.a)({},this.state.pages),o=this.traverseDirectory(r,this.state.currentPath);o.entries=[].concat(Object(Ze.a)(this.state.currentPage.entries),[i]),this.setState({pages:r,currentPage:o}),this.props.toggleUnsavedWork(!0)}},{key:"handleEditorClose",value:function(e,t,a){if(t){var n=Object(j.a)({},this.state.pages),i=Object(Ze.a)(this.state.currentPage.entries);i[a]=e;var r=this.traverseDirectory(n,this.state.currentPath);r.entries=i,this.setState({pages:n,currentPage:r}),this.props.toggleUnsavedWork(!0)}else this.forceUpdate()}},{key:"handleCreateFile",value:function(e,t){var a=this,n=e.entries;if(console.log(e),n===[])return[];console.log(e.directory);var i="".concat(t).concat("root"===e.directory?"":e.directory+"/"),r=[];console.log(n);for(var o=JSON.parse(JSON.stringify(n)),s=function(e){var t=o[e];Object.entries(t.images).map((function(t){var a=Object(Xe.a)(t,2),n=a[0],s=a[1];if("image"===s.format&&s.src.startsWith("data:image/")){var l=s.src.split(","),c=l[0].substring(11,l[0].indexOf(";")),d=l[1];console.log(d);var u="assets/".concat(n).concat(e,".").concat(c);r.push({file:"".concat(i).concat(u),contents:d}),o[e].images[n]=u}}));for(var a=function(a){var n=t.sections[a];Object.entries(n.images).map((function(t){var n=Object(Xe.a)(t,2),s=n[0],l=n[1];if("image"===l.format&&l.src.startsWith("data:image/")){var c=l.src.split(","),d=c[0].substring(11,c[0].indexOf(";")),u=c[1];u.length,u.split("=");console.log(u);var h="assets/".concat(s).concat(e,"_section").concat(a,".").concat(d);r.push({file:"".concat(i).concat(h),contents:u}),o[e].sections[a].images[s]=h}}))},n=0;n<t.sections.length;n++)a(n)},l=0;l<o.length;l++)s(l);var c=new nt.a,d=at.a.renderToString(c.collect(Object(Z.jsx)($e.a,{theme:xe,children:Object(Z.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:o.map((function(e,t){return a.renderEntry(e)}))})}))),u=et.a.encode('\n            <!DOCTYPE html>\n            <html lang="en">\n            <head>\n                <meta charset="UTF-8">\n                <meta name="viewport" content="width=device-width, initial-scale=1.0">\n                <meta http-equiv="X-UA-Compatible" content="ie=edge">\n                <link href="styles.css" rel="stylesheet">\n                <script defer src="script.js"><\/script>\n                <title>Welcome</title>\n            </head>\n            <body>\n            '.concat(d,"\n            </body>")),h=et.a.encode(c.toString()),p=et.a.encode(o.map((function(e,t){return ca[e.type][e.style].script(t)})).filter(Boolean).join("\n")),f=[].concat(r,[{file:"".concat(i,"scripts.js"),contents:p},{file:"".concat(i,"index.html"),contents:u},{file:"".concat(i,"styles.css"),contents:h}]);return e.directories!=={}&&Object.values(e.directories).map((function(e){console.log(e);var t=a.handleCreateFile(e,i);f=f.concat(t)})),console.log(f),f}},{key:"handleSavePortfolio",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saving begins"),console.log(this.state.pages),e.next=4,S()({method:"PUT",url:"https://resumate.xyz/api/portfolio/upsert",withCredentials:!0,data:{user:{id:this.props.id,name:this.props.name,avatar:this.props.avatar_url,gravatar_id:this.props.gravatar_id},portfolio:{_id:this.state.portfolio_id,name:this.state.name,pages:this.state.pages}}}).then(function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.data.message),t.setState({portfolio_id:a.data._id}),e.next=4,S()({method:"GET",url:"https://resumate.xyz/api/portfolio/"+t.state.portfolio_id,withCredentials:!0}).then(function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("_id updated"),console.log(a.data.portfolio),t.props.saveCurrentWorkToLocal(a.data.portfolio),t.setState({pages:a.data.portfolio.pages}),console.log(t.state.pages),e.next=7,t.handleUploadPreview();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G(e,t.props.history),t.props.history.push("/dashboard")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G(e,t.props.history)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleProduction",value:function(){var e=this.handleCreateFile(this.state.pages,"");e.map((function(e){return alert("file: ".concat(e.file,";\n").concat(et.a.decode(e.contents)))}));var t=[];return e.map((function(e){t.push({fileName:e.file,fileContent:e.contents})})),console.log(t),t}},{key:"handleDeleteEntry",value:function(e){var t=Object(j.a)({},this.state.pages),a=this.traverseDirectory(t,this.state.currentPath);a.entries=this.state.currentPage.entries.filter((function(t,a){return a!==e})),this.setState({pages:t,currentPage:a}),this.props.toggleUnsavedWork(!0)}},{key:"handleUpdatePages",value:function(e){this.state.pages=e,this.state.currentPage=e,this.state.currentPath=[],this.props.toggleUnsavedWork(!0)}},{key:"handleDirectory",value:function(e,t){void 0!==e&&(this.state.currentPage=e,this.state.currentPath=t),this.forceUpdate()}},{key:"handleUploadPreview",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na()(document.querySelector("#preview"),{backgroundColor:null,useCORS:!0}).then((function(e){e.toBlob(function(){var e=Object(u.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Ia.a).append("file",new File([a],"".concat(t.state.name," preview"),{type:"image/png"})),n.append("label","preview"),e.next=5,S()({method:"GET",url:"https://resumate.xyz/api/portfolio/checkExistingImage/"+t.state.portfolio_id,withCredentials:!0,params:{label:"preview"}}).then(function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.data.isExist){e.next=6;break}return console.log("updating image"),e.next=4,S()({method:"PUT",url:"https://resumate.xyz/api/portfolio/updateImage/"+t.state.portfolio_id,withCredentials:!0,data:n,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data.message)})).catch((function(e){G(e,t.props.history)}));case 4:e.next=9;break;case 6:return console.log("uploading image"),e.next=9,S()({method:"POST",url:"https://resumate.xyz/api/portfolio/uploadImage/"+t.state.portfolio_id,withCredentials:!0,data:n,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data.message),console.log(e.data.refs)})).catch((function(e){G(e,t.props.history)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){G(e,t.props.history)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(Z.jsx)(X.a,{when:this.props.isUnsaved,message:JSON.stringify({message:"Are you sure you want to leave? You have unsaved work.",portfolio:{_id:this.state.portfolio_id,name:this.state.name,pages:this.state.pages},user:{id:this.props.id,name:this.props.name,avatar:this.props.avatar_url,gravatar_id:this.props.gravatar_id}})}),Object(Z.jsx)("div",{id:"preview",children:this.state.currentPage.entries.map((function(a,n){return Object(Z.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(Z.jsx)($t,{fields:a,info:ca[a.type][a.style].info,onClose:function(t,a){e.handleEditorClose(t,a,n)}},"".concat(e.state.currentPath===[]?"root":e.state.currentPath[e.state.currentPath.length-1],"-").concat(n,"-").concat(a.type,"-").concat(a.style)),Object(Z.jsx)(Qe.a,{"data-html2canvas-ignore":"true",className:t.delFAB,onClick:function(){return e.handleDeleteEntry(n)},children:Object(Z.jsx)(te.FaTrash,{})}),e.renderEntry(a)]})}))}),Object(Z.jsxs)("div",{className:t.staticDiv,children:[Object(Z.jsx)(Qe.a,{className:t.controlFAB,onClick:function(){return console.log(e.handleSavePortfolio())},children:Object(Z.jsx)(te.FaSave,{})}),Object(Z.jsx)(pa,{onClose:this.handleSelector}),Object(Z.jsx)(ka,{onClose:this.handleDirectory,getState:function(){return{dirTree:e.state.pages}},dirTree:this.state.pages,onUpdate:this.handleUpdatePages}),Object(Z.jsx)(Oa,{createPushables:this.handleProduction})]})]})}}]),a}(r.Component),Fa={repopulate_state:w,saveCurrentWork:T,saveCurrentWorkToLocal:_,toggleUnsavedWork:function(e){return{type:E,payload:{bool:e}}}},Ea=Object(v.b)((function(e){return{loggedIn:e.login.loggedIn,name:e.login.name,id:e.login.id,avatar_url:e.login.avatar_url,gravatar_id:e.login.gravatar_id,currentPortfolio:e.portfolio.currentPortfolio,isUnsaved:e.portfolio.isUnsaved}}),Fa)(Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",paddingTop:"7%"},entryDiv:{position:"relative"},delFAB:{position:"absolute",marginTop:"5vw",marginLeft:"2vw"},controlFAB:{position:"static",marginRight:"0.5vw",marginBottom:"0.5vw"},staticDiv:{position:"fixed",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",bottom:"5%",right:"5%",top:"auto",left:"auto"}}}))(Object(X.h)(Pa))),Ta=function(e,t){var a=JSON.parse(e),n=document.createElement("div");n.setAttribute("custom-confirmation-navigation",""),document.body.appendChild(n);var i=function(){var e=Object(u.a)(d.a.mark((function e(i,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.a.unmountComponentAtNode(n),document.body.removeChild(n),!r){e.next=7;break}return e.next=5,S()({method:"PUT",url:"https://resumate.xyz/api/portfolio/upsert",withCredentials:!0,data:{user:a.user,portfolio:a.portfolio}}).then((function(e){console.log(e.data.message),t(!0)})).catch((function(e){e.response?console.log(e.response.data):console.log(e.message),console.log("failure to save, returning to portfolio to retry"),t(!1)}));case 5:e.next=8;break;case 7:t(i);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();l.a.render(Object(Z.jsxs)(Re.a,{open:!0,"aria-labelledby":"prompt-dialog","aria-describedby":"prompt-dialog",fullWidth:!0,children:[Object(Z.jsx)(Me.a,{id:"promp-title",children:"Alert"}),Object(Z.jsxs)(Ae.a,{children:[Object(Z.jsx)(Ue.a,{id:"prompt-text",children:a.message}),Object(Z.jsxs)(Be.a,{children:[Object(Z.jsx)(q.a,{onClick:function(){return i(!1,!1)},children:"Cancel"}),Object(Z.jsx)(q.a,{onClick:function(){return i(!0,!1)},children:"Discard unsaved work"}),Object(Z.jsx)(q.a,{onClick:function(){return i(!0,!0)},children:"Save work"})]})]})]}),n)},_a=a(75),La=a(143),Ra="Guest",Ba={loggedIn:!1,name:Ra,id:"",avatar_url:"",gravatar_id:"",error:null},Aa="";var Ua={portfolios:[],loading:!1,error:null,currentPortfolio:null,isUnsaved:!1};var Ma=Object(_a.b)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(j.a)(Object(j.a)({},e),{},{name:t.payload.name,id:t.payload.id,avatar_url:t.payload.avatar_url,gravatar_id:t.payload.gravatar_id,loggedIn:!0});case y:return Object(j.a)(Object(j.a)({},e),{},{name:Ra,id:Aa,avatar_url:Aa,gravatar_id:Aa,loggedIn:!1});case x:return Object(j.a)(Object(j.a)({},e),{},{loggedIn:t.payload.loggedIn,name:t.payload.name,id:t.payload.id,avatar_url:t.payload.avatar_url,gravatar_id:t.payload.gravatar_id});default:return e}},portfolio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case D:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,portfolios:t.payload.portfolios});case I:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,portfolios:[],currentPortfolio:null,error:t.payload.err});case P:return Object(j.a)(Object(j.a)({},e),{},{currentPortfolio:t.payload.curr});case F:return Object(j.a)(Object(j.a)({},e),{},{currentPortfolio:null});case E:return Object(j.a)(Object(j.a)({},e),{},{isUnsaved:t.payload.bool});default:return e}}}),za=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,307)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),r(e),o(e)}))},Ga=Object(_a.c)(Ma,Object(_a.a)(La.a));l.a.render(Object(Z.jsx)(o.a.StrictMode,{children:Object(Z.jsx)($e.a,{theme:xe,children:Object(Z.jsx)(ae.a,{getUserConfirmation:function(e,t){return Ta(e,t)},children:Object(Z.jsx)(v.a,{store:Ga,children:Object(Z.jsxs)(X.e,{children:[Object(Z.jsx)(X.c,{exact:!0,path:"/",component:De}),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(ee,{}),Object(Z.jsx)(X.c,{exact:!0,path:"/login/callback",component:Ee}),Object(Z.jsx)(X.c,{exact:!0,path:"/dashboard",component:Ve}),Object(Z.jsx)(X.c,{exact:!0,path:"/edit",component:Ea}),Object(Z.jsx)(X.c,{exact:!0,path:"/publish",component:Oa})]})]})})})})}),document.getElementById("root")),za();var Wa=t.default=Ga}},[[225,1,2]]]);
//# sourceMappingURL=main.d00d5dda.chunk.js.map